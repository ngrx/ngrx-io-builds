{
  "id": "guide/migration/v11",
  "title": "V11 Update Guide",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/migration/v11.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"v11-update-guide\">V11 Update Guide<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#v11-update-guide\"><i class=\"material-icons\">link</i></a></h1>\n<h2 id=\"angular-cli-update\">Angular CLI update<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#angular-cli-update\"><i class=\"material-icons\">link</i></a></h2>\n<p>NgRx supports using the Angular CLI <code>ng update</code> command to update your dependencies. Migration schematics are run to make the upgrade smoother. These schematics will fix some of the breaking changes.</p>\n<p>To update your packages to the latest released version, run the command below.</p>\n<code-example language=\"sh\">\nng update @ngrx/store@11\n</code-example>\n<h2 id=\"dependencies\">Dependencies<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#dependencies\"><i class=\"material-icons\">link</i></a></h2>\n<p>Version 11 has the minimum version requirements:</p>\n<ul>\n<li>Angular version 11.x</li>\n<li>Angular CLI version 11.x</li>\n<li>TypeScript version 4.0.x</li>\n<li>RxJS version 6.5.x</li>\n</ul>\n<h2 id=\"breaking-changes\">Breaking changes<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#breaking-changes\"><i class=\"material-icons\">link</i></a></h2>\n<h3 id=\"ngrxstore\">@ngrx/store<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#ngrxstore\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"stricter-props-for-createaction\">Stricter <code><a href=\"api/store/props\" class=\"code-anchor\">props</a></code> for <code><a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#stricter-props-for-createaction\"><i class=\"material-icons\">link</i></a></h4>\n<p><code><a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a></code> doesn't allow <code>{}</code> as a <code><a href=\"api/store/props\" class=\"code-anchor\">props</a></code> type anymore, because <code>{}</code> is compatible with primitive types.</p>\n<p>BEFORE:</p>\n<code-example language=\"ts\">\nconst customerPageLoaded = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[Customer Page] Loaded', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{}>());\n\ncustomerPageLoaded({}); // ✔️\ncustomerPageLoaded({ foo: 'bar' }); // ✔️\ncustomerPageLoaded(0); // 👈 no error\ncustomerPageLoaded(false); // 👈 no error\n</code-example>\n<p>AFTER:</p>\n<code-example language=\"ts\">\nconst customerPageLoaded = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>(\n  '[Customer Page] Loaded',\n  <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;Record&#x3C;string, unknown>>(),\n);\n</code-example>\n<h4 id=\"renames\">Renames<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#renames\"><i class=\"material-icons\">link</i></a></h4>\n<ul>\n<li>the interface <code>Props</code> is renamed to <code><a href=\"api/store/ActionCreatorProps\" class=\"code-anchor\">ActionCreatorProps</a></code></li>\n<li>the interface <code>On&#x3C;T></code> is renamed to <code><a href=\"api/store/ReducerTypes\" class=\"code-anchor\">ReducerTypes</a>&#x3C;T></code></li>\n</ul>\n<h3 id=\"ngrxentity\">@ngrx/entity<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#ngrxentity\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"removed-addall-in-favor-of-setall\">Removed <code>addAll</code> in favor of <code>setAll</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#removed-addall-in-favor-of-setall\"><i class=\"material-icons\">link</i></a></h4>\n<p>To overwrite the entities, we previously used the <code>addAll</code> method but the method name was confusing.</p>\n<p>BEFORE:</p>\n<code-example language=\"ts\">\nadapter.addAll(action.entities, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n</code-example>\n<p>AFTER:</p>\n<p>The new method name <code>setAll</code> describes the intention better.</p>\n<code-example language=\"ts\">\nadapter.setAll(action.entities, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n</code-example>\n<h3 id=\"ngrxrouter-store\">@ngrx/router-store<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#ngrxrouter-store\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"optimized-selectqueryparams-selectqueryparam-and-selectfragment-selectors\">Optimized <code>selectQueryParams</code>, <code>selectQueryParam</code> and <code>selectFragment</code> selectors<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#optimized-selectqueryparams-selectqueryparam-and-selectfragment-selectors\"><i class=\"material-icons\">link</i></a></h4>\n<p>They select query parameters/fragment from the root router state node instead of the last router state node.</p>\n<p>BEFORE:</p>\n<code-example language=\"ts\">\nconst <a href=\"api/router-store/MinimalActivatedRouteSnapshot#queryParams\" class=\"code-anchor\">queryParams</a>$ = this.store.select(selectQueryParams);\nconst <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a>$ = this.store.select(selectFragment);\n\n/*\nrouter <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>:\n{\n  root: {\n    <a href=\"api/router-store/MinimalActivatedRouteSnapshot#queryParams\" class=\"code-anchor\">queryParams</a>: {\n      search: 'foo',\n    },\n    <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a>: 'bar',\n    <a href=\"api/router-store/MinimalActivatedRouteSnapshot#firstChild\" class=\"code-anchor\">firstChild</a>: {\n      <a href=\"api/router-store/MinimalActivatedRouteSnapshot#queryParams\" class=\"code-anchor\">queryParams</a>: {\n        search: 'foo', 👈 query parameters are selected from here\n      },\n      <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a>: 'bar', 👈 <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a> is selected from here\n      <a href=\"api/router-store/MinimalActivatedRouteSnapshot#firstChild\" class=\"code-anchor\">firstChild</a>: undefined,\n    },\n  },\n  url: '/books?search=foo#bar',\n}\n*/\n</code-example>\n<p>AFTER:</p>\n<code-example language=\"ts\">\nconst <a href=\"api/router-store/MinimalActivatedRouteSnapshot#queryParams\" class=\"code-anchor\">queryParams</a>$ = this.store.select(selectQueryParams);\nconst <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a>$ = this.store.select(selectFragment);\n\n/*\nrouter <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>:\n{\n  root: {\n    <a href=\"api/router-store/MinimalActivatedRouteSnapshot#queryParams\" class=\"code-anchor\">queryParams</a>: {\n      search: 'foo', 👈 query parameters are selected from here\n    },\n    <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a>: 'bar', 👈 <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a> is selected from here\n    <a href=\"api/router-store/MinimalActivatedRouteSnapshot#firstChild\" class=\"code-anchor\">firstChild</a>: {\n      <a href=\"api/router-store/MinimalActivatedRouteSnapshot#queryParams\" class=\"code-anchor\">queryParams</a>: {\n        search: 'foo',\n      },\n      <a href=\"api/router-store/MinimalActivatedRouteSnapshot#fragment\" class=\"code-anchor\">fragment</a>: 'bar',\n      <a href=\"api/router-store/MinimalActivatedRouteSnapshot#firstChild\" class=\"code-anchor\">firstChild</a>: undefined,\n    },\n  },\n  url: '/books?search=foo#bar',\n}\n*/\n</code-example>\n<h3 id=\"ngrxstore-devtools\">@ngrx/store-devtools<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#ngrxstore-devtools\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"error-handling\">Error handling<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#error-handling\"><i class=\"material-icons\">link</i></a></h4>\n<p>The error handler now receives the full <code>Error</code> object instead of the error stack when an error occurs while computing the state. </p>\n<h2 id=\"deprecations\">Deprecations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#deprecations\"><i class=\"material-icons\">link</i></a></h2>\n<h3 id=\"ngrxeffects\">@ngrx/effects<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#ngrxeffects\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"the-effect-decorator\">The Effect decorator<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v11#the-effect-decorator\"><i class=\"material-icons\">link</i></a></h4>\n<p>The Effect decorator, <code>@<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a></code>, is deprecated in favor for the <code><a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a></code> method.</p>\n<p>See the <a href=\"/guide/effects#writing-effects\">docs</a> for more info.</p>\n<p>BEFORE:</p>\n<code-example language=\"ts\">\n@<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a>()\nlogin$ = this.actions$.pipe(...);\n</code-example>\n<p>AFTER:</p>\n<code-example language=\"ts\">\nlogin$ = <a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a>(() => {\n  return this.actions$.pipe(...);\n});\n</code-example>\n<p>To automatically migrate <code>@<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a></code> usages to the <code><a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a></code> method, run the following NgRx migration:</p>\n<code-example language=\"sh\">\nng generate @ngrx/schematics:create-effect-migration\n</code-example>\n\n</div>\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /guide/effects#writing-effects\n - api/effects/Effect\n - api/effects/createEffect\n - api/router-store/MinimalActivatedRouteSnapshot#firstChild\n - api/router-store/MinimalActivatedRouteSnapshot#fragment\n - api/router-store/MinimalActivatedRouteSnapshot#queryParams\n - api/store-devtools/StoreDevtools#state\n - api/store/ActionCreatorProps\n - api/store/ReducerTypes\n - api/store/createAction\n - api/store/props\n - guide/migration/v11#angular-cli-update\n - guide/migration/v11#breaking-changes\n - guide/migration/v11#dependencies\n - guide/migration/v11#deprecations\n - guide/migration/v11#error-handling\n - guide/migration/v11#ngrxeffects\n - guide/migration/v11#ngrxentity\n - guide/migration/v11#ngrxrouter-store\n - guide/migration/v11#ngrxstore\n - guide/migration/v11#ngrxstore-devtools\n - guide/migration/v11#optimized-selectqueryparams-selectqueryparam-and-selectfragment-selectors\n - guide/migration/v11#removed-addall-in-favor-of-setall\n - guide/migration/v11#renames\n - guide/migration/v11#stricter-props-for-createaction\n - guide/migration/v11#the-effect-decorator\n - guide/migration/v11#v11-update-guide\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/migration/v11.md?message=docs%3A%20describe%20your%20change...\n-->"
}