{
  "id": "guide/migration/v9",
  "title": "V9 Update Guide",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/migration/v9.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"v9-update-guide\">V9 Update Guide<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#v9-update-guide\"><i class=\"material-icons\">link</i></a></h1>\n<h2 id=\"angular-cli-update\">Angular CLI update<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#angular-cli-update\"><i class=\"material-icons\">link</i></a></h2>\n<p>NgRx supports using the Angular CLI <code>ng update</code> command to update your dependencies. Migration schematics are run to make the upgrade smoother. These schematics will fix some of the breaking changes.</p>\n<p>To update your packages to the latest released version, run the command below.</p>\n<code-example language=\"sh\">\nng update @ngrx/store\n</code-example>\n<h2 id=\"dependencies\">Dependencies<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#dependencies\"><i class=\"material-icons\">link</i></a></h2>\n<p>Version 9 has the minimum version requirements:</p>\n<ul>\n<li>Angular version 9.x</li>\n<li>Angular CLI version 9.x</li>\n<li>TypeScript version 3.7.x</li>\n<li>RxJS version 6.5.x</li>\n</ul>\n<h2 id=\"breaking-changes\">Breaking changes<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#breaking-changes\"><i class=\"material-icons\">link</i></a></h2>\n<h3 id=\"ngrxstore\">@ngrx/store<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#ngrxstore\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"immutability-checks-are-turned-on-by-default\">Immutability checks are turned on by default<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#immutability-checks-are-turned-on-by-default\"><i class=\"material-icons\">link</i></a></h4>\n<p>In the previous version of NgRx, <a href=\"/guide/store/configuration/runtime-checks\">runtime checks</a> were opt-in.\nIn this version, the immutability runtime check is turned on by default.</p>\n<p>To turn them off use:</p>\n<code-example language=\"ts\">\n@NgModule({\n  imports: [\n    StoreModule.forRoot(reducers, {\n      <a href=\"api/store/RootStoreConfig#runtimeChecks\" class=\"code-anchor\">runtimeChecks</a>: {\n        <a href=\"api/store/RuntimeChecks#strictStateImmutability\" class=\"code-anchor\">strictStateImmutability</a>: false,\n        <a href=\"api/store/RuntimeChecks#strictActionImmutability\" class=\"code-anchor\">strictActionImmutability</a>: false,\n      },\n    }),\n  ],\n})\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> class AppModule {}\n</code-example>\n<h4 id=\"change-default-value-of-minimal-to-true-store-schematics\">Change default value of minimal to true (Store Schematics)<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#change-default-value-of-minimal-to-true-store-schematics\"><i class=\"material-icons\">link</i></a></h4>\n<p>This change only registers <code>StoreModule.forRoot({})</code> in the provided <code>module</code> with an empty array.\nBefore, it also registered an empty reducer.</p>\n<h4 id=\"change-default-value-of-creators-to-true-store-schematics\">Change default value of creators to true (Store Schematics)<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#change-default-value-of-creators-to-true-store-schematics\"><i class=\"material-icons\">link</i></a></h4>\n<p>Action and reducers creators are now the default, instead of defining Actions as classes, and reducers as switch-based method.</p>\n<h3 id=\"ngrxeffects\">@ngrx/effects<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#ngrxeffects\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"resubscribeonerror-is-renamed-to-useeffectserrorhandler\"><code>resubscribeOnError</code> is renamed to <code><a href=\"api/effects/EffectConfig#useEffectsErrorHandler\" class=\"code-anchor\">useEffectsErrorHandler</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#resubscribeonerror-is-renamed-to-useeffectserrorhandler\"><i class=\"material-icons\">link</i></a></h4>\n<p>The option <code>resubscribeOnError</code> has been renamed to <code><a href=\"api/effects/EffectConfig#useEffectsErrorHandler\" class=\"code-anchor\">useEffectsErrorHandler</a></code>.\nThis change is made to make it possible to provide a <a href=\"/guide/effects/lifecycle#customizing-the-effects-error-handler\">custom effect error handler</a>.</p>\n<p>Before:</p>\n<code-example language=\"ts\">\n// decorator\n@<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a>({ resubscribeOnError: false })\n<a href=\"api/effects/EffectNotification#effect\" class=\"code-anchor\">effect</a>$ = ...\n\n// with <a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a>\n<a href=\"api/effects/EffectNotification#effect\" class=\"code-anchor\">effect</a>$ = <a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a>(() => ..., {resubscribeOnError: false })\n</code-example>\n<p>After:</p>\n<code-example language=\"ts\">\n// decorator\n@<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a>({ <a href=\"api/effects/EffectConfig#useEffectsErrorHandler\" class=\"code-anchor\">useEffectsErrorHandler</a>: false })\n<a href=\"api/effects/EffectNotification#effect\" class=\"code-anchor\">effect</a>$ = ...\n\n// with <a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a>\n<a href=\"api/effects/EffectNotification#effect\" class=\"code-anchor\">effect</a>$ = <a href=\"api/effects/createEffect\" class=\"code-anchor\">createEffect</a>(() => ..., { <a href=\"api/effects/EffectConfig#useEffectsErrorHandler\" class=\"code-anchor\">useEffectsErrorHandler</a>: false })\n</code-example>\n<div class=\"alert is-helpful\">\n<p>A migration is provided to rename the occurrences.</p>\n</div>\n<h4 id=\"limit-retries-to-10-by-default\">Limit retries to 10 by default<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#limit-retries-to-10-by-default\"><i class=\"material-icons\">link</i></a></h4>\n<p>By default, effects are resubscribed up to 10 errors, previously this was unlimited.</p>\n<p>To change the number, implement a <a href=\"/guide/effects/lifecycle#customizing-the-effects-error-handler\">custom effect error handler</a>, or <a href=\"/guide/effects/lifecycle#customizing-the-effects-error-handler\">change the number</a> TK add example to docs and provide link here.</p>\n<h4 id=\"dispatch-init-actions-once\">Dispatch init actions once<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#dispatch-init-actions-once\"><i class=\"material-icons\">link</i></a></h4>\n<p>Previously, when an Effect implemented the <code><a href=\"api/effects/OnInitEffects\" class=\"code-anchor\">OnInitEffects</a></code> lifecycle hook, the defined action would be dispatched after each time a lazy loaded module was loaded with the same Effect class.\nNow, the action will only be dispatched after the first module is loaded.</p>\n<h4 id=\"change-default-value-of-minimal-to-true-effects-schematics\">Change default value of minimal to true (Effects Schematics)<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#change-default-value-of-minimal-to-true-effects-schematics\"><i class=\"material-icons\">link</i></a></h4>\n<p>This change only registers <code><a href=\"api/effects/EffectsModule#forRoot\" class=\"code-anchor\">EffectsModule.forRoot()</a></code> in the provided <code>module</code> with an empty array.\nBefore, it also registered an empty effect class.</p>\n<h4 id=\"change-default-value-of-creators-to-true-effects-schematics\">Change default value of creators to true (Effects Schematics)<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#change-default-value-of-creators-to-true-effects-schematics\"><i class=\"material-icons\">link</i></a></h4>\n<p>Effects creators are now the default, instead of defining Effects with the <code>@<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a>()</code> decorator.</p>\n<h3 id=\"ngrxrouter-store\">@ngrx/router-store<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#ngrxrouter-store\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"minimal-router-state-is-the-default\">Minimal router state is the default<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#minimal-router-state-is-the-default\"><i class=\"material-icons\">link</i></a></h4>\n<p>Minimal router state becomes the default, this also means that the <a href=\"/guide/router-store/configuration\"><code>MinimalRouterStateSerializer</code></a> will be used by default. The minimal only contains state that is serializable, see <a href=\"/api/router-store/MinimalActivatedRouteSnapshot\"><code>MinimalActivatedRouteSnapshot</code></a> for more info.</p>\n<p>The event on the payload of the dispatched actions will only contain the router event id and the url, instead of the Angular RouterEvent.</p>\n<div class=\"alert is-helpful\">\n<p>A migration is provided and adds the <code><a href=\"api/router-store/DefaultRouterStateSerializer\" class=\"code-anchor\">DefaultRouterStateSerializer</a></code> if a serializer isn't set.</p>\n</div>\n<h2 id=\"deprecations\">Deprecations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#deprecations\"><i class=\"material-icons\">link</i></a></h2>\n<h3 id=\"ngrxentity\">@ngrx/entity<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#ngrxentity\"><i class=\"material-icons\">link</i></a></h3>\n<h4 id=\"addall\"><code>addAll</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/migration/v9#addall\"><i class=\"material-icons\">link</i></a></h4>\n<p>The <code>addAll</code> entity adapter method has been deprecated, in favor of <code>setAll</code>.\n<code>setAll</code>'s behavior is identical to <code>addAll</code>, but the name covers its intention better.</p>\n<p>BEFORE:</p>\n<code-example language=\"ts\">\nadapter.addAll([person1, person2, person3], <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n</code-example>\n<p>AFTER:</p>\n<code-example language=\"ts\">\nadapter.setAll([person1, person2, person3], <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n</code-example>\n\n</div>\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /api/router-store/MinimalActivatedRouteSnapshot\n - /guide/effects/lifecycle#customizing-the-effects-error-handler\n - /guide/router-store/configuration\n - /guide/store/configuration/runtime-checks\n - api/effects/Effect\n - api/effects/EffectConfig#useEffectsErrorHandler\n - api/effects/EffectNotification#effect\n - api/effects/EffectsModule#forRoot\n - api/effects/OnInitEffects\n - api/effects/createEffect\n - api/router-store/DefaultRouterStateSerializer\n - api/store-devtools/DevToolsFeatureOptions#export\n - api/store-devtools/StoreDevtools#state\n - api/store/RootStoreConfig#runtimeChecks\n - api/store/RuntimeChecks#strictActionImmutability\n - api/store/RuntimeChecks#strictStateImmutability\n - guide/migration/v9#addall\n - guide/migration/v9#angular-cli-update\n - guide/migration/v9#breaking-changes\n - guide/migration/v9#change-default-value-of-creators-to-true-effects-schematics\n - guide/migration/v9#change-default-value-of-creators-to-true-store-schematics\n - guide/migration/v9#change-default-value-of-minimal-to-true-effects-schematics\n - guide/migration/v9#change-default-value-of-minimal-to-true-store-schematics\n - guide/migration/v9#dependencies\n - guide/migration/v9#deprecations\n - guide/migration/v9#dispatch-init-actions-once\n - guide/migration/v9#immutability-checks-are-turned-on-by-default\n - guide/migration/v9#limit-retries-to-10-by-default\n - guide/migration/v9#minimal-router-state-is-the-default\n - guide/migration/v9#ngrxeffects\n - guide/migration/v9#ngrxentity\n - guide/migration/v9#ngrxrouter-store\n - guide/migration/v9#ngrxstore\n - guide/migration/v9#resubscribeonerror-is-renamed-to-useeffectserrorhandler\n - guide/migration/v9#v9-update-guide\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/migration/v9.md?message=docs%3A%20describe%20your%20change...\n-->"
}