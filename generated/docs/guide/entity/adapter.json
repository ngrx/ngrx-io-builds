{
  "id": "guide/entity/adapter",
  "title": "Entity Adapter",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/entity/adapter.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n<div class=\"content\">\n<h1 id=\"entity-adapter\">Entity Adapter<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#entity-adapter\"><i class=\"material-icons\">link</i></a></h1>\n<h2 id=\"createentityadapter\">createEntityAdapter<t></t><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#createentityadapter\"><i class=\"material-icons\">link</i></a></h2>\n<p>A method for returning a generic entity adapter for a single entity state collection. The\nreturned adapter provides many adapter methods for performing operations\nagainst the collection type. The method takes an object with 2 properties for configuration.</p>\n<ul>\n<li><code><a href=\"api/entity/EntityAdapter#selectId\" class=\"code-anchor\">selectId</a></code>: A <code>method</code> for selecting the primary id for the collection.</li>\n<li><code><a href=\"api/entity/EntityAdapter#sortComparer\" class=\"code-anchor\">sortComparer</a></code>: A compare function used to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\">sort</a> the collection. The comparer function is only needed if the collection needs to be sorted before being displayed. Set to <code>false</code> to leave the collection unsorted, which is more performant during CRUD operations.</li>\n</ul>\n<p>Usage:</p>\n<code-example language=\"ts\">\nimport { <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>, <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>, <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a> } from '@ngrx/entity';\n\nexport interface User {\n  id: string;\n  <a href=\"api/store-devtools/StoreDevtoolsConfig#name\" class=\"code-anchor\">name</a>: string;\n}\n\nexport interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> extends <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>&#x3C;User> {\n  // additional <a href=\"api/entity/EntityState#entities\" class=\"code-anchor\">entities</a> <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: number;\n}\n\nexport function sortByName(a: User, b: User): number {\n  return a.name.localeCompare(b.name);\n}\n\nexport const adapter: <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>&#x3C;User> = <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a>&#x3C;User>({\n  <a href=\"api/entity/EntityAdapter#sortComparer\" class=\"code-anchor\">sortComparer</a>: sortByName,\n});\n</code-example>\n<h2 id=\"adapter-methods\">Adapter Methods<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#adapter-methods\"><i class=\"material-icons\">link</i></a></h2>\n<p>These methods are provided by the adapter object returned\nwhen using createEntityAdapter. The methods are used inside your reducer function to manage\nthe entity collection based on your provided actions.</p>\n<h3 id=\"getinitialstate\">getInitialState<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#getinitialstate\"><i class=\"material-icons\">link</i></a></h3>\n<p>Returns the <code>initialState</code> for entity state based on the provided type. Additional state is also provided through the provided configuration object. The initialState is provided to your reducer function.</p>\n<p>Usage:</p>\n<code-example language=\"ts\">\nimport { <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>, <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>, <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a> } from '@ngrx/entity';\n\nexport interface User {\n  id: string;\n  <a href=\"api/store-devtools/StoreDevtoolsConfig#name\" class=\"code-anchor\">name</a>: string;\n}\n\nexport interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> extends <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>&#x3C;User> {\n  // additional <a href=\"api/entity/EntityState#entities\" class=\"code-anchor\">entities</a> <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: number | null;\n}\n\nexport const initialState: <a href=\"api/store/State\" class=\"code-anchor\">State</a> = adapter.getInitialState({\n  // additional entity <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: null,\n});\n\nexport function reducer(<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> = initialState, action): <a href=\"api/store/State\" class=\"code-anchor\">State</a> {\n  switch (action.type) {\n    default: {\n      return <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>;\n    }\n  }\n}\n</code-example>\n<h2 id=\"adapter-collection-methods\">Adapter Collection Methods<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#adapter-collection-methods\"><i class=\"material-icons\">link</i></a></h2>\n<p>The entity adapter also provides methods for operations against an entity. These methods can change\none to many records at a time. Each method returns the newly modified state if changes were made and the same\nstate if no changes were made.</p>\n<ul>\n<li><code>addOne</code>: Add one entity to the collection</li>\n<li><code>addMany</code>: Add multiple entities to the collection</li>\n<li><code>addAll</code>: Replace current collection with provided collection</li>\n<li><code>removeOne</code>: Remove one entity from the collection</li>\n<li><code>removeMany</code>: Remove multiple entities from the collection</li>\n<li><code>removeAll</code>: Clear entity collection</li>\n<li><code>updateOne</code>: Update one entity in the collection</li>\n<li><code>updateMany</code>: Update multiple entities in the collection</li>\n<li><code>upsertOne</code>: Add or Update one entity in the collection</li>\n<li><code>upsertMany</code>: Add or Update multiple entities in the collection</li>\n</ul>\n<p>Usage:</p>\n<p><code>user.model.ts</code></p>\n<code-example language=\"ts\">\nexport interface User {\n  id: string;\n  <a href=\"api/store-devtools/StoreDevtoolsConfig#name\" class=\"code-anchor\">name</a>: string;\n}\n</code-example>\n<p><code>user.actions.ts</code></p>\n<code-example language=\"ts\">\nimport { <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> } from '@ngrx/store';\nimport { <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a> } from '@ngrx/entity';\n\nimport { User } from './user.model';\n\nexport enum UserActionTypes {\n  LOAD_USERS = '[User] Load Users',\n  ADD_USER = '[User] Add User',\n  UPSERT_USER = '[User] Upsert User',\n  ADD_USERS = '[User] Add Users',\n  UPSERT_USERS = '[User] Upsert Users',\n  UPDATE_USER = '[User] <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a> User',\n  UPDATE_USERS = '[User] <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a> Users',\n  DELETE_USER = '[User] Delete User',\n  DELETE_USERS = '[User] Delete Users',\n  CLEAR_USERS = '[User] Clear Users',\n}\n\nexport class LoadUsers implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.LOAD_USERS;\n\n  constructor(public payload: { users: User[] }) {}\n}\n\nexport class AddUser implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.ADD_USER;\n\n  constructor(public payload: { user: User }) {}\n}\n\nexport class UpsertUser implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.UPSERT_USER;\n\n  constructor(public payload: { user: User }) {}\n}\n\nexport class AddUsers implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.ADD_USERS;\n\n  constructor(public payload: { users: User[] }) {}\n}\n\nexport class UpsertUsers implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.UPSERT_USERS;\n\n  constructor(public payload: { users: User[] }) {}\n}\n\nexport class UpdateUser implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.UPDATE_USER;\n\n  constructor(public payload: { user: <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>&#x3C;User> }) {}\n}\n\nexport class UpdateUsers implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.UPDATE_USERS;\n\n  constructor(public payload: { users: <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>&#x3C;User>[] }) {}\n}\n\nexport class DeleteUser implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.DELETE_USER;\n\n  constructor(public payload: { id: string }) {}\n}\n\nexport class DeleteUsers implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.DELETE_USERS;\n\n  constructor(public payload: { <a href=\"api/entity/EntityState#ids\" class=\"code-anchor\">ids</a>: string[] }) {}\n}\n\nexport class ClearUsers implements <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> {\n  readonly <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> = UserActionTypes.CLEAR_USERS;\n}\n\nexport <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a> UserActionsUnion =\n  | LoadUsers\n  | AddUser\n  | UpsertUser\n  | AddUsers\n  | UpsertUsers\n  | UpdateUser\n  | UpdateUsers\n  | DeleteUser\n  | DeleteUsers\n  | ClearUsers;\n</code-example>\n<p><code>user.reducer.ts</code></p>\n<code-example language=\"ts\">\nimport { <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>, <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>, <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a> } from '@ngrx/entity';\nimport { User } from './user.model';\nimport { UserActionsUnion, UserActionTypes } from './user.actions';\n\nexport interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> extends <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>&#x3C;User> {\n  // additional <a href=\"api/entity/EntityState#entities\" class=\"code-anchor\">entities</a> <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: number | null;\n}\n\nexport const adapter: <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>&#x3C;User> = <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a>&#x3C;User>();\n\nexport const initialState: <a href=\"api/store/State\" class=\"code-anchor\">State</a> = adapter.getInitialState({\n  // additional entity <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: null,\n});\n\nexport function reducer(<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> = initialState, action: UserActionsUnion): <a href=\"api/store/State\" class=\"code-anchor\">State</a> {\n  switch (action.type) {\n    case UserActionTypes.ADD_USER: {\n      return adapter.addOne(action.payload.user, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.UPSERT_USER: {\n      return adapter.upsertOne(action.payload.user, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.ADD_USERS: {\n      return adapter.addMany(action.payload.users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.UPSERT_USERS: {\n      return adapter.upsertMany(action.payload.users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.UPDATE_USER: {\n      return adapter.updateOne(action.payload.user, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.UPDATE_USERS: {\n      return adapter.updateMany(action.payload.users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.DELETE_USER: {\n      return adapter.removeOne(action.payload.id, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.DELETE_USERS: {\n      return adapter.removeMany(action.payload.ids, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.LOAD_USERS: {\n      return adapter.addAll(action.payload.users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n    }\n\n    case UserActionTypes.CLEAR_USERS: {\n      return adapter.removeAll({ ...state, selectedUserId: null });\n    }\n\n    default: {\n      return <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>;\n    }\n  }\n}\n\nexport const getSelectedUserId = (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>: <a href=\"api/store/State\" class=\"code-anchor\">State</a>) => state.selectedUserId;\n\n// get the selectors\nconst {\n  selectIds,\n  selectEntities,\n  selectAll,\n  selectTotal,\n} = adapter.getSelectors();\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the array of user <a href=\"api/entity/EntityState#ids\" class=\"code-anchor\">ids</a>\nexport const selectUserIds = selectIds;\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the dictionary of user <a href=\"api/entity/EntityState#entities\" class=\"code-anchor\">entities</a>\nexport const selectUserEntities = selectEntities;\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the array of users\nexport const selectAllUsers = selectAll;\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the total user count\nexport const selectUserTotal = selectTotal;\n</code-example>\n<h3 id=\"entity-selectors\">Entity Selectors<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#entity-selectors\"><i class=\"material-icons\">link</i></a></h3>\n<p>The <code>getSelectors</code> method returned by the created entity adapter provides functions for selecting information from the entity.</p>\n<p>The <code>getSelectors</code> method takes a selector function as its only argument to select the piece of state for a defined entity.</p>\n<p>Usage:</p>\n<p><code>reducers/index.ts</code></p>\n<code-example language=\"ts\">\nimport {\n  <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>,\n  <a href=\"api/store/createFeatureSelector\" class=\"code-anchor\">createFeatureSelector</a>,\n  <a href=\"api/store/ActionReducerMap\" class=\"code-anchor\">ActionReducerMap</a>,\n} from '@ngrx/store';\nimport * as fromUser from './user.reducer';\n\nexport interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> {\n  users: fromUser.State;\n}\n\nexport const reducers: <a href=\"api/store/ActionReducerMap\" class=\"code-anchor\">ActionReducerMap</a>&#x3C;<a href=\"api/store/State\" class=\"code-anchor\">State</a>> = {\n  users: fromUser.reducer,\n};\n\nexport const selectUserState = <a href=\"api/store/createFeatureSelector\" class=\"code-anchor\">createFeatureSelector</a>&#x3C;fromUser.State>('users');\n\nexport const selectUserIds = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectUserIds\n);\nexport const selectUserEntities = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectUserEntities\n);\nexport const selectAllUsers = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectAllUsers\n);\nexport const selectUserTotal = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectUserTotal\n);\nexport const selectCurrentUserId = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.getSelectedUserId\n);\n\nexport const selectCurrentUser = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserEntities,\n  selectCurrentUserId,\n  (userEntities, userId) => userEntities[userId]\n);\n</code-example>\n\n</div>\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/entity/EntityAdapter\n - api/entity/EntityAdapter#selectId\n - api/entity/EntityAdapter#sortComparer\n - api/entity/EntityState\n - api/entity/EntityState#entities\n - api/entity/EntityState#ids\n - api/entity/Update\n - api/entity/createEntityAdapter\n - api/store-devtools/StoreDevtools#state\n - api/store-devtools/StoreDevtoolsConfig#name\n - api/store/Action\n - api/store/Action#type\n - api/store/ActionReducerMap\n - api/store/State\n - api/store/createFeatureSelector\n - api/store/createSelector\n - api/store/select\n - guide/entity/adapter#adapter-collection-methods\n - guide/entity/adapter#adapter-methods\n - guide/entity/adapter#createentityadapter\n - guide/entity/adapter#entity-adapter\n - guide/entity/adapter#entity-selectors\n - guide/entity/adapter#getinitialstate\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/entity/adapter.md?message=docs%3A%20describe%20your%20change...\n-->"
}