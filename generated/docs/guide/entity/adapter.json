{
  "id": "guide/entity/adapter",
  "title": "Entity Adapter",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/entity/adapter.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"entity-adapter\">Entity Adapter<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#entity-adapter\"><i class=\"material-icons\">link</i></a></h1>\n<h2 id=\"createentityadaptert\">createEntityAdapter&#x3C;T><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#createentityadaptert\"><i class=\"material-icons\">link</i></a></h2>\n<p>A method for returning a generic entity adapter for a single entity state collection. The\nreturned adapter provides many adapter methods for performing operations\nagainst the collection type. The method takes an object with 2 properties for configuration.</p>\n<ul>\n<li><code>selectId</code>: A method for selecting the primary id for the collection. Optional when the entity has a primary key of <code><a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a></code></li>\n<li><code>sortComparer</code>: A compare function used to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\">sort</a> the collection. The comparer function is only needed if the collection needs to be sorted before being displayed. Set to <code>false</code> to leave the collection unsorted, which is more performant during CRUD operations.</li>\n</ul>\n<p>Usage:</p>\n<code-example header=\"user.reducer.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>, <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>, <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a> } from '@ngrx/entity';\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface User {\n  <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: string;\n  name: string;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> extends <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>&#x3C;User> {\n  // additional entities <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: string | null;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> function selectUserId(a: User): string {\n  //In this case this would be optional since primary key is <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>\n  return a.id;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> function sortByName(a: User, b: User): number {\n  return a.name.localeCompare(b.name);\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const <a href=\"api/data/EntityCollectionReducerMethods#adapter\" class=\"code-anchor\">adapter</a>: <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>&#x3C;User> = <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a>&#x3C;User>({\n  selectId: selectUserId,\n  sortComparer: sortByName,\n});\n</code-example>\n<h2 id=\"adapter-methods\">Adapter Methods<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#adapter-methods\"><i class=\"material-icons\">link</i></a></h2>\n<p>These methods are provided by the adapter object returned\nwhen using createEntityAdapter. The methods are used inside your reducer function to manage\nthe entity collection based on your provided actions.</p>\n<h3 id=\"getinitialstate\">getInitialState<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#getinitialstate\"><i class=\"material-icons\">link</i></a></h3>\n<p>Returns the <code>initialState</code> for entity state based on the provided type. Additional state is also provided through the provided configuration object. The initialState is provided to your reducer function.</p>\n<p>Usage:</p>\n<code-example header=\"user.reducer.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/store/Action\" class=\"code-anchor\">Action</a>, <a href=\"api/store/createReducer\" class=\"code-anchor\">createReducer</a> } from '@ngrx/store';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>, <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>, <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a> } from '@ngrx/entity';\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface User {\n  <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: string;\n  name: string;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> extends <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>&#x3C;User> {\n  // additional entities <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: string | null;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const initialState: <a href=\"api/store/State\" class=\"code-anchor\">State</a> = adapter.getInitialState({\n  // additional entity <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: null,\n});\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const userReducer = <a href=\"api/store/createReducer\" class=\"code-anchor\">createReducer</a>(initialState);\n</code-example>\n<h2 id=\"adapter-collection-methods\">Adapter Collection Methods<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#adapter-collection-methods\"><i class=\"material-icons\">link</i></a></h2>\n<p>The entity adapter also provides methods for operations against an entity. These methods can change\none to many records at a time. Each method returns the newly modified state if changes were made and the same\nstate if no changes were made.</p>\n<ul>\n<li><code>addOne</code>: Add one entity to the collection.</li>\n<li><code>addMany</code>: Add multiple entities to the collection.</li>\n<li><code>setAll</code>: Replace current collection with provided collection.</li>\n<li><code>setOne</code>: Add or Replace one entity in the collection.</li>\n<li><code>setMany</code>: Add or Replace multiple entities in the collection.</li>\n<li><code>removeOne</code>: Remove one entity from the collection.</li>\n<li><code>removeMany</code>: Remove multiple entities from the collection, by id or by predicate.</li>\n<li><code>removeAll</code>: Clear entity collection.</li>\n<li><code>updateOne</code>: Update one entity in the collection. Supports partial updates.</li>\n<li><code>updateMany</code>: Update multiple entities in the collection. Supports partial updates.</li>\n<li><code>upsertOne</code>: Add or Update one entity in the collection. Supports partial updates.</li>\n<li><code>upsertMany</code>: Add or Update multiple entities in the collection. Supports partial updates.</li>\n<li><code>mapOne</code>: Update one entity in the collection by defining a map function.</li>\n<li><code>map</code>: Update multiple entities in the collection by defining a map function, similar to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\">Array.map</a>.</li>\n</ul>\n<p>Usage:</p>\n<code-example header=\"user.model.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface User {\n  <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: string;\n  name: string;\n}\n</code-example>\n<code-example header=\"user.actions.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>, <a href=\"api/store/props\" class=\"code-anchor\">props</a> } from '@ngrx/store';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>, <a href=\"api/entity/EntityMap\" class=\"code-anchor\">EntityMap</a>, <a href=\"api/entity/EntityMapOne\" class=\"code-anchor\">EntityMapOne</a>, <a href=\"api/entity/Predicate\" class=\"code-anchor\">Predicate</a> } from '@ngrx/entity';\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { User } from '../models/user.model';\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const loadUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] Load Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ users: User[] }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const setUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] Set Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ users: User[] }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const addUser = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Add\" class=\"code-anchor\">Add</a> User', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ user: User }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const setUser = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] Set User', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ user: User }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const upsertUser = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Upsert\" class=\"code-anchor\">Upsert</a> User', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ user: User }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const addUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Add\" class=\"code-anchor\">Add</a> Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ users: User[] }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const upsertUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Upsert\" class=\"code-anchor\">Upsert</a> Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ users: User[] }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const updateUser = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a> User', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ update: <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>&#x3C;User> }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const updateUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a> Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ updates: <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>&#x3C;User>[] }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const mapUser = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] Map User', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ entityMap: <a href=\"api/entity/EntityMapOne\" class=\"code-anchor\">EntityMapOne</a>&#x3C;User> }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const mapUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] Map Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ entityMap: <a href=\"api/entity/EntityMap\" class=\"code-anchor\">EntityMap</a>&#x3C;User> }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const deleteUser = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Delete\" class=\"code-anchor\">Delete</a> User', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: string }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const deleteUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Delete\" class=\"code-anchor\">Delete</a> Users', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ <a href=\"api/entity/EntityState#ids\" class=\"code-anchor\">ids</a>: string[] }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const deleteUsersByPredicate = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] <a href=\"api/data/ChangeSetOperation#Delete\" class=\"code-anchor\">Delete</a> Users By <a href=\"api/entity/Predicate\" class=\"code-anchor\">Predicate</a>', <a href=\"api/store/props\" class=\"code-anchor\">props</a>&#x3C;{ <a href=\"api/store-devtools/StoreDevtoolsConfig#predicate\" class=\"code-anchor\">predicate</a>: <a href=\"api/entity/Predicate\" class=\"code-anchor\">Predicate</a>&#x3C;User> }>());\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const clearUsers = <a href=\"api/store/createAction\" class=\"code-anchor\">createAction</a>('[User/API] Clear Users');\n\n</code-example>\n<code-example header=\"user.reducer.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/store/Action\" class=\"code-anchor\">Action</a>, <a href=\"api/store/createReducer\" class=\"code-anchor\">createReducer</a>, <a href=\"api/store/on\" class=\"code-anchor\">on</a> } from '@ngrx/store';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>, <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>, <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a> } from '@ngrx/entity';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { User } from '../models/user.model';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> * as UserActions from '../actions/user.actions';\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> extends <a href=\"api/entity/EntityState\" class=\"code-anchor\">EntityState</a>&#x3C;User> {\n  // additional entities <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: string | null;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const <a href=\"api/data/EntityCollectionReducerMethods#adapter\" class=\"code-anchor\">adapter</a>: <a href=\"api/entity/EntityAdapter\" class=\"code-anchor\">EntityAdapter</a>&#x3C;User> = <a href=\"api/entity/createEntityAdapter\" class=\"code-anchor\">createEntityAdapter</a>&#x3C;User>();\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const initialState: <a href=\"api/store/State\" class=\"code-anchor\">State</a> = adapter.getInitialState({\n  // additional entity <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> properties\n  selectedUserId: null,\n});\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const userReducer = <a href=\"api/store/createReducer\" class=\"code-anchor\">createReducer</a>(\n  initialState,\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.addUser, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { user }) => {\n    return adapter.addOne(user, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>)\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.setUser, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { user }) => {\n    return adapter.setOne(user, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>)\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.upsertUser, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { user }) => {\n    return adapter.upsertOne(user, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.addUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { users }) => {\n    return adapter.addMany(users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.upsertUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { users }) => {\n    return adapter.upsertMany(users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.updateUser, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { update }) => {\n    return adapter.updateOne(update, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.updateUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { updates }) => {\n    return adapter.updateMany(updates, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.mapUser, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { entityMap }) => {\n    return adapter.mapOne(entityMap, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.mapUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { entityMap }) => {\n    return adapter.map(entityMap, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.deleteUser, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a> }) => {\n    return adapter.removeOne(<a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.deleteUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { <a href=\"api/entity/EntityState#ids\" class=\"code-anchor\">ids</a> }) => {\n    return adapter.removeMany(<a href=\"api/entity/EntityState#ids\" class=\"code-anchor\">ids</a>, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.deleteUsersByPredicate, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { <a href=\"api/store-devtools/StoreDevtoolsConfig#predicate\" class=\"code-anchor\">predicate</a> }) => {\n    return adapter.removeMany(<a href=\"api/store-devtools/StoreDevtoolsConfig#predicate\" class=\"code-anchor\">predicate</a>, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.loadUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { users }) => {\n    return adapter.setAll(users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.setUsers, (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>, { users }) => {\n    return adapter.setMany(users, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>);\n  }),\n  <a href=\"api/store/on\" class=\"code-anchor\">on</a>(UserActions.clearUsers, <a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a> => {\n    return adapter.removeAll({ ...state, selectedUserId: null });\n  })\n);\n\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const getSelectedUserId = (<a href=\"api/store-devtools/StoreDevtools#state\" class=\"code-anchor\">state</a>: <a href=\"api/store/State\" class=\"code-anchor\">State</a>) => state.selectedUserId;\n\n// get the selectors\nconst {\n  selectIds,\n  selectEntities,\n  selectAll,\n  selectTotal,\n} = adapter.getSelectors();\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the array of user <a href=\"api/entity/EntityState#ids\" class=\"code-anchor\">ids</a>\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserIds = selectIds;\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the dictionary of user entities\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserEntities = selectEntities;\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the array of users\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectAllUsers = selectAll;\n\n// <a href=\"api/store/select\" class=\"code-anchor\">select</a> the total user count\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserTotal = selectTotal;\n</code-example>\n<h3 id=\"entity-updates\">Entity Updates<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#entity-updates\"><i class=\"material-icons\">link</i></a></h3>\n<p>There are a few caveats to be aware of when updating entities using the entity adapter. </p>\n<p>The first is that <code>updateOne</code> and <code>updateMany</code> make use of the <code><a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>&#x3C;T></code> interface shown below. This supports partial updates.</p>\n<code-example language=\"typescript\">\ninterface UpdateStr&#x3C;T> {\n  <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: string;\n  changes: Partial&#x3C;T>;\n}\n\ninterface UpdateNum&#x3C;T> {\n  <a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: number;\n  changes: Partial&#x3C;T>;\n}\n\ntype <a href=\"api/entity/Update\" class=\"code-anchor\">Update</a>&#x3C;T> = UpdateStr&#x3C;T> | UpdateNum&#x3C;T>;\n</code-example>\n<p>Secondly, <code>upsertOne</code> and <code>upsertMany</code> will perform an insert or update. If a partial entity is provided this will perform an update.</p>\n<p>To prevent partial updates either explicitly set all the fields, setting non-used fields with value <code>undefined</code>, or use the <code>setOne</code>, <code>setAll</code> or <code>setMany</code> adapter methods. </p>\n<h3 id=\"entity-selectors\">Entity Selectors<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/entity/adapter#entity-selectors\"><i class=\"material-icons\">link</i></a></h3>\n<p>The <code><a href=\"api/router-store/getSelectors\" class=\"code-anchor\">getSelectors</a></code> method returned by the created entity adapter provides functions for selecting information from the entity.</p>\n<p>The <code><a href=\"api/router-store/getSelectors\" class=\"code-anchor\">getSelectors</a></code> method takes a selector function as its only argument to select the piece of state for a defined entity.</p>\n<p>Usage:</p>\n<code-example header=\"index.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> {\n  <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>,\n  <a href=\"api/store/createFeatureSelector\" class=\"code-anchor\">createFeatureSelector</a>,\n  <a href=\"api/store/ActionReducerMap\" class=\"code-anchor\">ActionReducerMap</a>,\n} from '@ngrx/store';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> * as fromUser from './user.reducer';\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> interface <a href=\"api/store/State\" class=\"code-anchor\">State</a> {\n  users: fromUser.State;\n}\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const reducers: <a href=\"api/store/ActionReducerMap\" class=\"code-anchor\">ActionReducerMap</a>&#x3C;<a href=\"api/store/State\" class=\"code-anchor\">State</a>> = {\n  users: fromUser.reducer,\n};\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserState = <a href=\"api/store/createFeatureSelector\" class=\"code-anchor\">createFeatureSelector</a>&#x3C;fromUser.State>('users');\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserIds = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectUserIds // shorthand for usersState => fromUser.selectUserIds(usersState)\n);\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserEntities = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectUserEntities\n);\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectAllUsers = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectAllUsers\n);\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectUserTotal = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.selectUserTotal\n);\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectCurrentUserId = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserState,\n  fromUser.getSelectedUserId\n);\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const selectCurrentUser = <a href=\"api/store/createSelector\" class=\"code-anchor\">createSelector</a>(\n  selectUserEntities,\n  selectCurrentUserId,\n  (userEntities, userId) => userId &#x26;&#x26; userEntities[userId]\n);\n</code-example>\n\n</div>\n\n<!-- links to this doc:\n - guide/data/entity-actions\n - guide/data/entity-reducer\n-->\n<!-- links from this doc:\n - api/data/ChangeSetOperation#Add\n - api/data/ChangeSetOperation#Delete\n - api/data/ChangeSetOperation#Upsert\n - api/data/EntityCollectionReducerMethods#adapter\n - api/data/UpdateResponseData#id\n - api/entity/EntityAdapter\n - api/entity/EntityMap\n - api/entity/EntityMapOne\n - api/entity/EntityState\n - api/entity/EntityState#ids\n - api/entity/Predicate\n - api/entity/Update\n - api/entity/createEntityAdapter\n - api/router-store/getSelectors\n - api/store-devtools/DevToolsFeatureOptions#export\n - api/store-devtools/DevToolsFeatureOptions#import\n - api/store-devtools/StoreDevtools#state\n - api/store-devtools/StoreDevtoolsConfig#predicate\n - api/store/Action\n - api/store/ActionReducerMap\n - api/store/State\n - api/store/createAction\n - api/store/createFeatureSelector\n - api/store/createReducer\n - api/store/createSelector\n - api/store/on\n - api/store/props\n - api/store/select\n - guide/entity/adapter#adapter-collection-methods\n - guide/entity/adapter#adapter-methods\n - guide/entity/adapter#createentityadaptert\n - guide/entity/adapter#entity-adapter\n - guide/entity/adapter#entity-selectors\n - guide/entity/adapter#entity-updates\n - guide/entity/adapter#getinitialstate\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/entity/adapter.md?message=docs%3A%20describe%20your%20change...\n-->"
}