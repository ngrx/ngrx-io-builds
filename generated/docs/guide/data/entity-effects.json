{
  "id": "guide/data/entity-effects",
  "title": "Entity Effects",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/main/projects/ngrx.io/content/guide/data/entity-effects.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<div class=\"alert is-critical\">\n<p>The <code>@ngrx/data</code> package is in <a href=\"https://github.com/ngrx/platform/issues/4011\" target=\"_blank\">maintenance mode</a>.\nChanges to this package are limited to critical bug fixes.</p>\n</div>\n<h1 id=\"entity-effects\">Entity Effects<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data/entity-effects#entity-effects\"><i class=\"material-icons\">link</i></a></h1>\n<p><strong>Work in Progress</strong></p>\n<p><strong><em>Effects</em></strong> are a way to trigger <em>side effects</em> with <em>actions</em>.</p>\n<p>A one common, desirable <em>side effect</em> is an asynchronous HTTP call to the remote server to fetch or save entity data.</p>\n<p>You implement one or more <em>effects</em> with the help of the NgRx <a href=\"guide/effects\">Effects</a> library.</p>\n<p><em>Actions</em> dispatched to the <em>NgRx store</em> can be detected and processed by your <em>effect</em> method.\nAfter processing, whether synchronously or asynchronously, your method can dispatch new action(s) to the <em>store</em></p>\n<p>The NgRx Data library implements an effect named <code><a href=\"api/data/EntityEffects#persist$\" class=\"code-anchor\">persist$</a></code> in its <code><a href=\"api/data/EntityEffects\" class=\"code-anchor\">EntityEffects</a></code> class.</p>\n<p>The <code><a href=\"api/data/EntityEffects#persist$\" class=\"code-anchor\">persist$</a></code> method filters for certain <code>EntityAction.op</code> values.\nThese values turn into HTTP GET, PUT, POST, and DELETE requests with entity data.\nWhen the server responds (whether favorably or with an error), the <code><a href=\"api/data/EntityEffects#persist$\" class=\"code-anchor\">persist$</a></code> method dispatches new <code><a href=\"api/data/EntityAction\" class=\"code-anchor\">EntityAction</a></code>s to the <em>store</em> with the appropriate response data.</p>\n<h4 id=\"cancellation\">Cancellation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data/entity-effects#cancellation\"><i class=\"material-icons\">link</i></a></h4>\n<p>You can try to cancel a save by dispatching a <code><a href=\"api/data/EntityOp#CANCEL_PERSIST\" class=\"code-anchor\">CANCEL_PERSIST</a></code> EntityAction with the\n<strong>correlation id</strong> of the <em>persistence action</em> that you want to cancel.</p>\n<p>The <code>EntityCache.cancel$</code> watches for this action and is piped into\nthe <code>EntityCache.persist$</code>, where it can try to cancel an entity collection query or save operation\nor at least prevent the server response from updating the cache.</p>\n<div class=\"alert is-helpful\">\n<p>It's not obvious that this is ever a great idea for a save operation.\nYou cannot tell the server to cancel this way and cannot know if the server did or did not save.\nNor can you count on processing the cancel request before the client receives the server response\nand applies the changes on the server or to the cache.</p>\n<p>If you cancel before the server results arrive, the <code>EntityEffect</code> will not try to update\nthe cached collection with late arriving server results.\nThe effect will issue a <code><a href=\"api/data/EntityOp#CANCELED_PERSIST\" class=\"code-anchor\">CANCELED_PERSIST</a></code> action instead.\nThe <code><a href=\"api/data/EntityCollection\" class=\"code-anchor\">EntityCollection</a></code> reducer ignores this action but you can listen for it among the store actions\nand thus know that the cancellation took effect on the client.</p>\n</div>\n<p><strong><em>More to come on the subject of effects</em></strong></p>\n\n</div>\n\n<!-- links to this doc:\n - guide/data/architecture-overview\n - guide/data/entity-reducer\n-->\n<!-- links from this doc:\n - api/data/EntityAction\n - api/data/EntityCollection\n - api/data/EntityEffects\n - api/data/EntityEffects#persist$\n - api/data/EntityOp#CANCELED_PERSIST\n - api/data/EntityOp#CANCEL_PERSIST\n - guide/data/entity-effects#cancellation\n - guide/data/entity-effects#entity-effects\n - guide/effects\n - https://github.com/ngrx/platform/edit/main/projects/ngrx.io/content/guide/data/entity-effects.md?message=docs%3A%20describe%20your%20change...\n - https://github.com/ngrx/platform/issues/4011\n-->"
}