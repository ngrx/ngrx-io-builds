{
  "id": "guide/component-store/comparison",
  "title": "Comparison of ComponentStore and Store",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/component-store/comparison.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"comparison-of-componentstore-and-store\">Comparison of ComponentStore and Store<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/component-store/comparison#comparison-of-componentstore-and-store\"><i class=\"material-icons\">link</i></a></h1>\n<p>Both ComponentStore and Store are designed to manage the state in an Angular application, however\nthey are addressing different problems. These libraries are independent of each other, and,\ndepending on many factors, one or the other or even both in tandem would be recommended.</p>\n<p>Among the factors that would influence which of the libraries (or both) should be used are the following:</p>\n<ul>\n<li>\n<p><strong>Size of the application</strong>. How many components does it have?</p>\n</li>\n<li>\n<p><strong>Interconnection of the app</strong>. Are these components tied together, or are they independent\ngroups of components sub-trees?</p>\n</li>\n<li>\n<p><strong>Depth of component tree</strong>. How many levels of depth does the component tree have?</p>\n</li>\n<li>\n<p><strong>State ownership</strong>. Could there be a clear separation of state ownership at different\nnodes of the components tree?</p>\n</li>\n<li>\n<p><strong>State lifespan</strong>. Is the state needed throughout the lifespan of the application, or only when\nsome pages are displayed and we want to automatically clean it up when the user navigates somewhere\nelse?</p>\n</li>\n<li>\n<p><strong>Business Requirements</strong>. How well are all of the business requirements understood and finalized before the\nimplementation of the app starts? Would the be changing frequently?</p>\n</li>\n<li>\n<p><strong>Lifespan of the app</strong>. Is this a short-lived Minimum Viable Product (MVP) that would be discarded, a solution that won't need much support or changes once it's released, or is it a long-term product\nthat would be constantly changing, based on changing business needs?</p>\n</li>\n<li>\n<p><strong>Backend APIs</strong>. Does the team have influence over backend(s) and the APIs that they provide?</p>\n</li>\n</ul>\n<p>The longer the lifespan of the app and the larger it is, the greater the need to separate how the\ndata is retrieved and how components are displaying it. That drives earlier separation of\n<em>\"Data Transfer Objects\"</em> (aka <em>\"Network Models\"</em>) - the models used to communicate with backend(s) - and <em>\"View Models\"</em> - the models\nused by components in the templates.</p>\n<p>ComponentStore is responsible for managing smaller, more local state. While it's possible to have\nmultiple ComponentStores, one has to have a clear understanding of state ownership of each one of\nthem.</p>\n<h2 id=\"benefits-and-trade-offs\">Benefits and Trade-offs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/component-store/comparison#benefits-and-trade-offs\"><i class=\"material-icons\">link</i></a></h2>\n<p>ComponentStore and Global Store have many benefits, some of which are listed in the <a href=\"guide/store/why#why-use-ngrx-store-for-state-management\">introduction</a>. They help organize state, make migrations to new APIs easier,\nencapsulate changes and side-effects, make our components smaller, easier to test and more\nperformant, but they are also introducing code complexity with <strong>indirections</strong>. </p>\n<div class=\"alert is-important\">\n<p><strong>Note:</strong> It's important to understand what the cost is and why we are adding it.</p>\n</div>\n<p>Both of them bring <a href=\"https://medium.com/@thomasburlesonIA/push-based-architectures-with-rxjs-81b327d7c32d\">push-based architecture</a>, which is the first indirection. The developer can no longer\nget the result of a service method call, instead they would be listening for Observable values\nexposed by that service. The benefit, on the other side, is that the developer no longer has to worry what\nis changing the state - all the component needs to know is that something has changed it. If the\ncomponent wants to change the state itself, it sends the message about it (either dispatches an\nAction in Store, or calls ComponentStore's <code>updater</code> or <code><a href=\"api/effects/EffectNotification#effect\" class=\"code-anchor\">effect</a></code>).</p>\n<p>Actions are the second indirection. They are present in the Global Store only. There are many benefits\nof this indirection, such as:</p>\n<ul>\n<li>ability to trigger multiple effects/reducers at the same time</li>\n<li>greater scalability</li>\n<li>useful DevTools</li>\n</ul>\n<p>ComponentStore doesn't have that indirection, however it also loses the above-mentioned benefits.</p>\n<p>The scale of state that it works with has to be smaller, which brings another set of benefits, such as:</p>\n<ul>\n<li>ComponentStore that is tied to the specific node in the components tree, will be automatically cleaned up when that node is destroyed</li>\n<li>state is fully self-contained with each ComponentStore, and thus allows to have multiple\nindependent instances of the same component</li>\n<li>provides simpler state management to small/medium sized apps</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p>The difference between the benefits and trade-offs of Stores make Global Store better suited for\nmanaging global shared state, where ComponentStore shines managing more local, encapsulated state,\nas well as component UI state.</p>\n</div>\n<p>Depending on the needs of the application, the developer might choose Store or ComponentStore, or,\nin cases of the larger apps, both Store <strong>and</strong> ComponentStore.</p>\n<h2 id=\"state-ownership\">State ownership<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/component-store/comparison#state-ownership\"><i class=\"material-icons\">link</i></a></h2>\n<p>The Global Store works with the <strong>single</strong> immutable object, that contains all of the shared state throughout\nthe application. There are multiple reducers, each one responsible for a particular <strong>slice</strong> of\nstate.</p>\n<p>Each ComponentStore is fully responsible for its own state. There could be <strong>many</strong> different\nComponentStores, but each one should store its own distinct state.</p>\n<figure>\n  <img src=\"generated/images/guide/component-store/state-structure.png\" alt=\"Comparison of NgRx Store and Component Store state ownership or placement\" width=\"100%\" height=\"100%\">\n</figure>\n<h2 id=\"file-structure\">File structure<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/component-store/comparison#file-structure\"><i class=\"material-icons\">link</i></a></h2>\n<p>ComponentStore is focused on a smaller part the state, and thus should contain not only the state\nitself, but also every \"prescription\" of how it could be changed. All \"<code>updater</code>s\" and \"<code><a href=\"api/effects/EffectNotification#effect\" class=\"code-anchor\">effect</a></code>s\"\nshould be part of the ComponentStore, responsible for the specific state.</p>\n<p>It makes ComponentStore less scalable - if there are too many updaters and effects in a single class,\nthen it quickly becomes unreadable.</p>\n<p>Shared <code><a href=\"api/store/select\" class=\"code-anchor\">select</a></code>ors should also be part of the ComponentStore, however downstream components might\nhave their component-specific details, such as aggregating all the info needed for their <em>\"View Model\"</em>.\nIn such cases, it's acceptable to create <code><a href=\"api/component-store/ComponentStore\" class=\"code-anchor\">ComponentStore</a>&#x3C;object></code> that won't be managing state\nand would contain a number of selectors.</p>\n<figure>\n  <img src=\"generated/images/guide/component-store/file-structure.png\" alt=\"Comparison of NgRx Store and Component Store file structures\" width=\"100%\" height=\"100%\">\n</figure>\n\n</div>\n\n<!-- links to this doc:\n - guide/component-store\n-->\n<!-- links from this doc:\n - api/component-store/ComponentStore\n - api/effects/EffectNotification#effect\n - api/store/select\n - guide/component-store/comparison#benefits-and-trade-offs\n - guide/component-store/comparison#comparison-of-componentstore-and-store\n - guide/component-store/comparison#file-structure\n - guide/component-store/comparison#state-ownership\n - guide/store/why#why-use-ngrx-store-for-state-management\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/component-store/comparison.md?message=docs%3A%20describe%20your%20change...\n - https://medium.com/@thomasburlesonIA/push-based-architectures-with-rxjs-81b327d7c32d\n-->"
}