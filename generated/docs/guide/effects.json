{
  "id": "guide/effects",
  "title": "Effects",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/effects/index.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"effects\">Effects<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/effects#effects\"><i class=\"material-icons\">link</i></a></h1>\n<p>RxJS powered side effect model for <a href=\"guide/store\">Store</a></p>\n<p>Effects provides an API to model event sources as actions. Effects:</p>\n<ul>\n<li>Listen for actions dispatched from <a href=\"guide/store\">Store</a>.</li>\n<li>Isolate side effects from components, allowing for more <em>pure</em> components that select state and dispatch actions.</li>\n<li>Provide <a href=\"https://martinfowler.com/eaaDev/EventSourcing.html\">new sources</a> of actions to reduce state based on external interactions such as network requests, web socket messages and time-based events.</li>\n</ul>\n<h3 id=\"installation\">Installation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/effects#installation\"><i class=\"material-icons\">link</i></a></h3>\n<code-example language=\"sh\">\nnpm install @ngrx/effects --save\n</code-example>\n<code-example language=\"sh\">\nyarn add @ngrx/effects\n</code-example>\n<h2 id=\"apis\">APIs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/effects#apis\"><i class=\"material-icons\">link</i></a></h2>\n<p>Effects are injectable service classes that use two main APIs.</p>\n<h3 id=\"effect-decorator\">Effect decorator<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/effects#effect-decorator\"><i class=\"material-icons\">link</i></a></h3>\n<p>The <code><a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a></code> decorator provides metadata to register observable side-effects in the effects class. Registered effects provide new actions provided by the source Observable to the store.</p>\n<h3 id=\"actions-observable\">Actions Observable<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/effects#actions-observable\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>Represents an observable of all actions dispatched to the store.</li>\n<li>Emits the latest action <em>after</em> the action has passed through all reducers.</li>\n<li>The <code><a href=\"api/effects/ofType\" class=\"code-anchor\">ofType</a></code> operator lets you filter for actions of a certain type in which you want to use to perform a side effect.</li>\n</ul>\n<h2 id=\"setup\">Setup<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/effects#setup\"><i class=\"material-icons\">link</i></a></h2>\n<ol>\n<li>Create an AuthEffects service that describes a source of login actions:</li>\n</ol>\n<code-example language=\"ts\">\n// ./effects/auth.effects.ts\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { <a href=\"api/store/Action\" class=\"code-anchor\">Action</a> } from '@ngrx/store';\nimport { <a href=\"api/effects/Actions\" class=\"code-anchor\">Actions</a>, <a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a>, <a href=\"api/effects/ofType\" class=\"code-anchor\">ofType</a> } from '@ngrx/effects';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\n\n@Injectable()\nexport class AuthEffects {\n  // Listen for the 'LOGIN' action\n  @<a href=\"api/effects/Effect\" class=\"code-anchor\">Effect</a>()\n  login$: Observable&#x3C;<a href=\"api/store/Action\" class=\"code-anchor\">Action</a>> = this.actions$.pipe(\n    <a href=\"api/effects/ofType\" class=\"code-anchor\">ofType</a>('LOGIN'),\n    mergeMap(action =>\n      this.http.post('/auth', action.payload).pipe(\n        // If successful, dispatch success action with result\n        map(data => ({ <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a>: 'LOGIN_SUCCESS', payload: data })),\n        // If request fails, dispatch failed action\n        catchError(() => of({ <a href=\"api/store/Action#type\" class=\"code-anchor\">type</a>: 'LOGIN_FAILED' }))\n      )\n    )\n  );\n\n  constructor(private http: HttpClient, private actions$: <a href=\"api/effects/Actions\" class=\"code-anchor\">Actions</a>) {}\n}\n</code-example>\n<ol start=\"2\">\n<li>Register the EffectsModule in your application root imports. This EffectsModule <em>must</em> be added to\nyour root <code>NgModule</code> for the effects providers to be registered and start when your application is loaded.</li>\n</ol>\n<code-example language=\"ts\">\nimport { <a href=\"api/effects/EffectsModule\" class=\"code-anchor\">EffectsModule</a> } from '@ngrx/effects';\nimport { AuthEffects } from './effects/auth.effects';\n\n@NgModule({\n  imports: [EffectsModule.forRoot([AuthEffects])],\n})\nexport class AppModule {}\n</code-example>\n<p>For feature modules, register your effects via <code>EffectsModule.forFeature</code> method in your module's <code>imports</code>:</p>\n<code-example language=\"ts\">\nimport { <a href=\"api/effects/EffectsModule\" class=\"code-anchor\">EffectsModule</a> } from '@ngrx/effects';\nimport { AdminEffects } from './effects/admin.effects';\n\n@NgModule({\n  imports: [EffectsModule.forFeature([AdminEffects])],\n})\nexport class AdminModule {}\n</code-example>\n\n</div>\n\n<!-- links to this doc:\n - docs\n - guide/store/actions\n-->\n<!-- links from this doc:\n - api/effects/Actions\n - api/effects/Effect\n - api/effects/EffectsModule\n - api/effects/ofType\n - api/store/Action\n - api/store/Action#type\n - guide/effects#actions-observable\n - guide/effects#apis\n - guide/effects#effect-decorator\n - guide/effects#effects\n - guide/effects#installation\n - guide/effects#setup\n - guide/store\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/effects/index.md?message=docs%3A%20describe%20your%20change...\n - https://martinfowler.com/eaaDev/EventSourcing.html\n-->"
}