{
  "id": "guide/data",
  "title": "@ngrx/data",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/data/index.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"ngrxdata\">@ngrx/data<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#ngrxdata\"><i class=\"material-icons\">link</i></a></h1>\n<p>NgRx Data is an extension that offers a gentle introduction to NgRx by simplifying management of <strong>entity data</strong> while reducing the amount of explicitness.  </p>\n<h2 id=\"introduction\">Introduction<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#introduction\"><i class=\"material-icons\">link</i></a></h2>\n<p>Many applications have substantial <em>domain models</em> with 10s or 100s of entity types.</p>\n<p>Such applications typically create, retrieve, update, and delete entity data that are \"persisted\" in a database of some sort, hosted on a remote server.</p>\n<p>Developers who build these apps with the NgRx <a href=\"guide/store\">Store</a>, <a href=\"guide/effects\">Effects</a>, and <a href=\"guide/entity\">Entity</a> libraries alone tend to write a large number of <em>actions</em>, <em>action-creators</em>, <em>reducers</em>, <em>effects</em>, <em>dispatchers</em>, and <em>selectors</em> as well as the HTTP GET, PUT, POST, and DELETE methods <em>for each entity type</em>.\nThere will be a lot of repetitive code to create, maintain, and test.\nThe more entities in your model, the bigger the challenge.</p>\n<p>With NgRx Data you can develop large entity models quickly with very little code\nand without knowing much NgRx at all.\nYet all of NgRx remains accessible to you, when and if you want it.</p>\n<p>NgRx Data is an abstraction over the Store, Effects, and Entity that radically reduces\nthe amount of code you'll write.\nAs with any abstraction, while you gain simplicity,\nyou lose the explicitness of direct interaction with the supporting NgRx libraries.</p>\n<h2 id=\"key-concepts\">Key Concepts<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#key-concepts\"><i class=\"material-icons\">link</i></a></h2>\n<h4 id=\"ngrx-data\">NgRx Data<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#ngrx-data\"><i class=\"material-icons\">link</i></a></h4>\n<ul>\n<li>automates the creation of actions, reducers, effects, dispatchers, and selectors for each entity type.</li>\n<li>provides default HTTP GET, PUT, POST, and DELETE methods for each entity type.</li>\n<li>holds entity data as collections within a cache which is a slice of NgRx store state.</li>\n<li>supports optimistic and pessimistic save strategies</li>\n<li>enables transactional save of multiple entities of multiple types in the same request.</li>\n<li>makes reasonable default implementation choices</li>\n<li>offers numerous extension points for changing or augmenting those default behaviors.</li>\n</ul>\n<p>NgRx Data targets management of <em>persisted entity data</em>, like <em>Customers</em> and <em>Orders</em>, that many apps query and save to remote storage. That's its sweet spot.</p>\n<p>It is ill-suited to <em>non-entity</em> data.\nValue types, enumerations, session data and highly idiosyncratic data are better managed with standard NgRx.\nReal-world apps will benefit from a combination of NgRx techniques, all sharing a common store.</p>\n<h4 id=\"entity\">Entity<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#entity\"><i class=\"material-icons\">link</i></a></h4>\n<p>An <strong>entity</strong> is an object with long-lived data values that you read from and write to a database.  An entity refers to some \"thing\" in the application domain.  Examples include a <em>Customer</em>, <em>Order</em>, <em>LineItem</em>, <em>Product</em>, <em>Person</em> and <em>User</em>.</p>\n<p>An <strong>entity</strong> is a specific kind of data, an object defined by its <em>thread of continuity and identity</em>. </p>\n<p>We experience its \"continuity\" by storing and retrieving (\"persisting\") entity objects in a permanent store on a server, a store such as a database. Whether we retrieve the \"Sally\" entity today or tomorrow or next week, we \"mean\" that we're getting the same conceptual \"Sally\" no matter how her data attributes have changed.</p>\n<p>In NgRx Data we maintain the entity object's identity by means of its <strong>primary key</strong>. Every entity in NgRx Data must have a <em>primary key</em>. The primary key is usually a single attribute of the object. For example, that \"Sally\" entity object might be an instance of the \"Customer\" entity type, an instance whose permanent, unchanging primary key is the <code><a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a></code> property with a value of <code>42</code>.</p>\n<p>The primary key doesn't have to be a single attribute. It can consist of multiple attributes of the object if you need that feature. What matters is that the primary key <em>uniquely</em> identifies that object within a permanent collection of entities of the same type. There can be exactly one <code>Customer</code> entity with <code><a href=\"api/data/UpdateResponseData#id\" class=\"code-anchor\">id</a>: 42</code> and that entity is \"Sally\".</p>\n<h3 id=\"entity-collection\">Entity Collection<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#entity-collection\"><i class=\"material-icons\">link</i></a></h3>\n<p>The notion of an <em>Entity Collection</em> is also fundamental to NgRx Data. All entities belong to a collection of the same entity type. A <code>Customer</code> entity belongs to a <code>Customers</code> collection.</p>\n<p>Even if you have only one instance of an entity type, it must be held within an entity collection: perhaps a collection with a single element.</p>\n<h2 id=\"defining-the-entities\">Defining the entities<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#defining-the-entities\"><i class=\"material-icons\">link</i></a></h2>\n<p>A <code><a href=\"api/data/EntityMetadataMap\" class=\"code-anchor\">EntityMetadataMap</a></code> tells NgRx Data about your entities.  Add a property to the set for each entity name.</p>\n<code-example header=\"entity-metadata.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/data/EntityMetadataMap\" class=\"code-anchor\">EntityMetadataMap</a> } from '@ngrx/data';\n\nconst <a href=\"api/data/EntityDataModuleConfig#entityMetadata\" class=\"code-anchor\">entityMetadata</a>: <a href=\"api/data/EntityMetadataMap\" class=\"code-anchor\">EntityMetadataMap</a> = {\n  Hero: {},\n  Villain: {}\n};\n\n// because the plural of \"hero\" is not \"heros\"\nconst pluralNames = { Hero: 'Heroes' };\n\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> const entityConfig = {\n  <a href=\"api/data/EntityDataModuleConfig#entityMetadata\" class=\"code-anchor\">entityMetadata</a>,\n  pluralNames\n};\n</code-example>\n<p>Export the entity configuration to be used when registering it in your <code>AppModule</code>.</p>\n<h2 id=\"registering-the-entity-store\">Registering the entity store<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#registering-the-entity-store\"><i class=\"material-icons\">link</i></a></h2>\n<p>Once the entity configuration is created, you need to put it into the root store for NgRx.  This is done by importing the <code>entityConfig</code> and then passing it to the <code><a href=\"api/data/EntityDataModule#forRoot\" class=\"code-anchor\">EntityDataModule.forRoot()</a></code> function.</p>\n<code-example header=\"app.module.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { NgModule } from '@angular/core';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { HttpClientModule } from '@angular/common/http';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/effects/EffectsModule\" class=\"code-anchor\">EffectsModule</a> } from '@ngrx/effects';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/store/StoreModule\" class=\"code-anchor\">StoreModule</a> } from '@ngrx/store';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { <a href=\"api/data/DefaultDataServiceConfig\" class=\"code-anchor\">DefaultDataServiceConfig</a>, <a href=\"api/data/EntityDataModule\" class=\"code-anchor\">EntityDataModule</a> } from '@ngrx/data';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { entityConfig } from './entity-metadata';\n\n@NgModule({\n  imports: [\n    HttpClientModule,\n    StoreModule.forRoot({}),\n    EffectsModule.forRoot([]),\n    EntityDataModule.forRoot(entityConfig)\n  ]\n})\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> class AppModule {}\n</code-example>\n<h2 id=\"creating-entity-data-services\">Creating entity data services<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#creating-entity-data-services\"><i class=\"material-icons\">link</i></a></h2>\n<p>NgRx Data handles creating, retrieving, updating, and deleting data on your server by extending <code><a href=\"api/data/EntityCollectionServiceBase\" class=\"code-anchor\">EntityCollectionServiceBase</a></code> in your service class.</p>\n<code-example header=\"hero.service.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { Injectable } from '@angular/core';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> {\n  <a href=\"api/data/EntityCollectionServiceBase\" class=\"code-anchor\">EntityCollectionServiceBase</a>,\n  <a href=\"api/data/EntityCollectionServiceElementsFactory\" class=\"code-anchor\">EntityCollectionServiceElementsFactory</a>\n} from '@ngrx/data';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { Hero } from '../core';\n\n@Injectable({ providedIn: 'root' })\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> class HeroService extends <a href=\"api/data/EntityCollectionServiceBase\" class=\"code-anchor\">EntityCollectionServiceBase</a>&#x3C;Hero> {\n  constructor(serviceElementsFactory: <a href=\"api/data/EntityCollectionServiceElementsFactory\" class=\"code-anchor\">EntityCollectionServiceElementsFactory</a>) {\n    super('Hero', serviceElementsFactory);\n  }\n}\n</code-example>\n<h2 id=\"using-ngrx-data-in-components\">Using NgRx Data in components<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/data#using-ngrx-data-in-components\"><i class=\"material-icons\">link</i></a></h2>\n<p>To access the entity data, components should inject entity data services.</p>\n<code-example header=\"heroes.component.ts\">\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { Component, OnInit } from '@angular/core';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { Observable } from 'rxjs';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { Hero } from '../../core';\n<a href=\"api/store-devtools/DevToolsFeatureOptions#import\" class=\"code-anchor\">import</a> { HeroService } from '../hero.service';\n\n@Component({\n  <a href=\"api/store/testing/MockSelector#selector\" class=\"code-anchor\">selector</a>: 'app-heroes',\n  templateUrl: './heroes.component.html',\n  styleUrls: ['./heroes.component.scss']\n})\n<a href=\"api/store-devtools/DevToolsFeatureOptions#export\" class=\"code-anchor\">export</a> class HeroesComponent implements OnInit {\n  <a href=\"api/data/EntityCollection#loading\" class=\"code-anchor\">loading</a>$: Observable&#x3C;boolean>;\n  heroes$: Observable&#x3C;Hero[]>;\n\n  constructor(private heroService: HeroService) {\n    this.heroes$ = heroService.entities$;\n    this.loading$ = heroService.loading$;\n  }\n\n  ngOnInit() {\n    this.getHeroes();\n  }\n\n  add(hero: Hero) {\n    this.heroService.add(hero);\n  }\n\n  delete(hero: Hero) {\n    this.heroService.delete(hero.id);\n  }\n\n  getHeroes() {\n    this.heroService.getAll();\n  }\n\n  update(hero: Hero) {\n    this.heroService.update(hero);\n  }\n}\n</code-example>\n<p>In this example, you need to listen for the stream of heroes. The <code>heroes$</code> property references the <code>heroService.entities$</code> Observable.  When state is changed as a result of a successful HTTP request (initiated by <code>getAll()</code>, for example), the <code>heroes$</code> property will emit the latest Hero array.</p>\n<p>By default, the service includes the <code><a href=\"api/data/EntityCollection#loading\" class=\"code-anchor\">loading</a>$</code> Observable to indicate whether an HTTP request is in progress.  This helps applications manage loading states.</p>\n\n</div>\n\n<!-- links to this doc:\n - docs\n-->\n<!-- links from this doc:\n - api/data/DefaultDataServiceConfig\n - api/data/EntityCollection#loading\n - api/data/EntityCollectionServiceBase\n - api/data/EntityCollectionServiceElementsFactory\n - api/data/EntityDataModule\n - api/data/EntityDataModule#forRoot\n - api/data/EntityDataModuleConfig#entityMetadata\n - api/data/EntityMetadataMap\n - api/data/UpdateResponseData#id\n - api/effects/EffectsModule\n - api/store-devtools/DevToolsFeatureOptions#export\n - api/store-devtools/DevToolsFeatureOptions#import\n - api/store/StoreModule\n - api/store/testing/MockSelector#selector\n - guide/data#creating-entity-data-services\n - guide/data#defining-the-entities\n - guide/data#entity\n - guide/data#entity-collection\n - guide/data#introduction\n - guide/data#key-concepts\n - guide/data#ngrx-data\n - guide/data#ngrxdata\n - guide/data#registering-the-entity-store\n - guide/data#using-ngrx-data-in-components\n - guide/effects\n - guide/entity\n - guide/store\n - https://github.com/ngrx/platform/edit/master/projects/ngrx.io/content/guide/data/index.md?message=docs%3A%20describe%20your%20change...\n-->"
}