{"version":3,"sources":["./src/app/custom-elements/contributor/contributor.service.ts","./src/app/custom-elements/contributor/contributor.component.ts","./src/app/custom-elements/contributor/contributor-list.component.ts","./src/app/custom-elements/contributor/contributor-list.module.ts"],"names":["contributorsPath","knownGroups","http","this","contributors","getContributors","get","pipe","map","contribs","contribMap","Object","keys","forEach","key","contributor","group","contribGroup","push","cmap","order","indexOf","name","length","sort","compareContributors","compareGroups","publishLast","connect","ContributorService","l","r","toUpperCase","$event","stopPropagation","noPicture","pictureBase","flipCard","person","isFlipped","ContributorComponent","contributorService","locationService","ngOnInit","groupName","search","subscribe","grps","groups","groupNames","g","selectGroup","toLowerCase","selectedGroup","find","setSearch","ContributorListComponent","customElementComponent","ContributorListModule"],"mappings":"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","file":"contributor-contributor-list-module.a12aa943d80a3db7b1ee.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { ConnectableObservable, Observable } from 'rxjs';\nimport { map, publishLast } from 'rxjs/operators';\n\nimport { Contributor, ContributorGroup } from './contributors.model';\n\n// TODO(andrewjs): Look into changing this so that we don't import the service just to get the const\nimport { CONTENT_URL_PREFIX } from 'app/documents/document.service';\n\nconst contributorsPath = CONTENT_URL_PREFIX + 'contributors.json';\nconst knownGroups = ['Core', 'Contributor'];\n\n@Injectable()\nexport class ContributorService {\n    contributors: Observable<ContributorGroup[]>;\n\n    constructor(private http: HttpClient) {\n        this.contributors = this.getContributors();\n    }\n\n    private getContributors() {\n        const contributors = this.http\n            .get<{ [key: string]: Contributor }>(contributorsPath)\n            .pipe(\n                // Create group map\n                map(contribs => {\n                    const contribMap: { [name: string]: Contributor[] } = {};\n                    Object.keys(contribs).forEach(key => {\n                        const contributor = contribs[key];\n                        const group = contributor.group;\n                        const contribGroup = contribMap[group];\n                        if (contribGroup) {\n                            contribGroup.push(contributor);\n                        } else {\n                            contribMap[group] = [contributor];\n                        }\n                    });\n\n                    return contribMap;\n                }),\n\n                // Flatten group map into sorted group array of sorted contributors\n                map(cmap => {\n                    return Object.keys(cmap)\n                        .map(key => {\n                            const order = knownGroups.indexOf(key);\n                            return {\n                                name: key,\n                                order: order === -1 ? knownGroups.length : order,\n                                contributors: cmap[key].sort(compareContributors),\n                            } as ContributorGroup;\n                        })\n                        .sort(compareGroups);\n                }),\n\n                publishLast()\n            );\n\n        (contributors as ConnectableObservable<ContributorGroup[]>).connect();\n        return contributors;\n    }\n}\n\nfunction compareContributors(l: Contributor, r: Contributor) {\n    return l.name.toUpperCase() > r.name.toUpperCase() ? 1 : -1;\n}\n\nfunction compareGroups(l: ContributorGroup, r: ContributorGroup) {\n    return l.order === r.order\n        ? l.name > r.name\n            ? 1\n            : -1\n        : l.order > r.order\n            ? 1\n            : -1;\n}\n","import { Component, Input } from '@angular/core';\n\nimport { Contributor } from './contributors.model';\nimport { CONTENT_URL_PREFIX } from 'app/documents/document.service';\n\n@Component({\n    selector: 'aio-contributor',\n    template: `\n    <div [ngClass]=\"{ 'flipped': person.isFlipped }\" class=\"contributor-card\">\n\n        <div class=\"card-front\" (click)=\"flipCard(person)\">\n            <h3>{{person.name}}</h3>\n\n            <div class=\"contributor-image\" [style.background-image]=\"'url('+pictureBase+(person.picture || noPicture)+')'\">\n                <div class=\"contributor-info\">\n                    <a *ngIf=\"person.bio\" mat-button>\n                        View Bio\n                    </a>\n                    <a *ngIf=\"person.twitter\" mat-button class=\"icon\"\n                        href=\"https://twitter.com/{{person.twitter}}\" target=\"_blank\" (click)=\"$event.stopPropagation()\">\n                        <span class=\"fa fa-twitter fa-2x\"></span>\n                    </a>\n                    <a *ngIf=\"person.website\" mat-button class=\"icon\"\n                        href=\"{{person.website}}\" target=\"_blank\" (click)=\"$event.stopPropagation()\">\n                        <span class=\"fa fa-link fa-2x\"></span>\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"card-back\" *ngIf=\"person.isFlipped\" (click)=\"flipCard(person)\">\n            <h3>{{person.name}}</h3>\n            <p class=\"contributor-bio\">{{person.bio}}</p>\n        </div>\n    </div>\n  `\n})\nexport class ContributorComponent {\n    @Input() person: Contributor;\n    noPicture = '_no-one.png';\n    pictureBase = CONTENT_URL_PREFIX + 'images/bios/';\n\n    flipCard(person: Contributor) {\n        person.isFlipped = !person.isFlipped;\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ContributorGroup } from './contributors.model';\nimport { ContributorService } from './contributor.service';\nimport { LocationService } from 'app/shared/location.service';\n\n@Component({\n    selector: 'aio-contributor-list',\n    template: `\n  <div class=\"flex-center group-buttons\">\n    <a *ngFor=\"let name of groupNames\"\n       [class.selected]=\"name == selectedGroup.name\"\n       class=\"button mat-button filter-button\"\n       (click)=\"selectGroup(name)\">{{name}}</a>\n  </div>\n  <section *ngIf=\"selectedGroup\" class=\"grid-fluid\">\n    <div class=\"contributor-group\">\n      <aio-contributor *ngFor=\"let person of selectedGroup.contributors\" [person]=\"person\"></aio-contributor>\n    </div>\n  </section>`\n})\nexport class ContributorListComponent implements OnInit {\n    private groups: ContributorGroup[];\n    groupNames: string[];\n    selectedGroup: ContributorGroup;\n\n    constructor(\n        private contributorService: ContributorService,\n        private locationService: LocationService) { }\n\n    ngOnInit() {\n        const groupName =  this.locationService.search()['group'] || '';\n        // no need to unsubscribe because `contributors` completes\n        this.contributorService.contributors\n            .subscribe(grps => {\n                this.groups = grps;\n                this.groupNames = grps.map(g => g.name);\n                this.selectGroup(groupName);\n            });\n    }\n\n    selectGroup(name: string) {\n        name = name.toLowerCase();\n        this.selectedGroup = this.groups.find(g => g.name.toLowerCase() === name) || this.groups[0];\n        this.locationService.setSearch('', {group: this.selectedGroup.name});\n    }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ContributorListComponent } from './contributor-list.component';\nimport { ContributorService } from './contributor.service';\nimport { ContributorComponent } from './contributor.component';\nimport { WithCustomElementComponent } from '../element-registry';\n\n@NgModule({\n    imports: [ CommonModule ],\n    declarations: [ ContributorListComponent, ContributorComponent ],\n    entryComponents: [ ContributorListComponent ],\n    providers: [ ContributorService ]\n})\nexport class ContributorListModule implements WithCustomElementComponent {\n    customElementComponent: Type<any> = ContributorListComponent;\n}\n"],"sourceRoot":"webpack:///"}